name: Ejemplo de Workflow con PR Mergeado

on:
  workflow_dispatch:
    inputs:
      branchPr:
        description: 'PR'
        type: string
        required: true
      releaseType:
        description: 'Release type'
        required: true
        default: 'Weekly release name'
        type: choice
        options:
          - Weekly release
          - Emergency
      releaseName:
        description: 'Release name'
        type: string
        required: true
      rootCausePr:
        description: 'Root Cause PR'
        type: string
        required: true
      jiraTicket:
        description: 'Jira ticket'
        type: string
        required: true
      reason4Fix:
        description: 'Reason fix is critical'
        type: string
        required: true
jobs:
  check-out:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: output
      run: echo ' ${{ github.event.inputs.emergency_release_name }} ${{ github.event.inputs.weekly_release_name }} ${{ github.event.inputs.root_cause_pr }} ${{ github.event.inputs.jira_ticket }} ${{ github.event.inputs.reason_fix_critical }}'
  log-the-inputs:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "PR: $PR"
          echo "TYPE: $TYPE"
          echo "RELEASE_NAME: $RELEASE_NAME"
          echo "ROOT_CAUSE_PR: $ROOT_CAUSE_PR"
          echo "JIRA_TICKET: $JIRA_TICKET"
          echo "REASON_FIX: $REASON_FIX"
        env:
          PR: ${{ inputs.branchPr }}
          TYPE: ${{ inputs.releaseType }}
          RELEASE_NAME: ${{ inputs.releaseName }}
          ROOT_CAUSE_PR: ${{ inputs.rootCausePr }}
          JIRA_TICKET: ${{ inputs.jiraTicket }}
          REASON_FIX: ${{ inputs.reason4Fix }}
  check-pr-information:
    - name: get the Pr information
      run: |
        echo "PR_JSON=$(gh pr view ${{ inputs.branchPr }} --json author,mergeCommit,mergeable,mergedAt,number,title,url,id,labels)" >> $GITHUB_OUTPUT
      env:
        PR_JSON: ${{ steps.version.outputs.PR_JSON }}
  log-the-inputs2:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "PR_JSON: $PR_JSON"
          echo "REASON_FIX: $REASON_FIX"
